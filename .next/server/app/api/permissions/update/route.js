/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/permissions/update/route";
exports.ids = ["app/api/permissions/update/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpermissions%2Fupdate%2Froute&page=%2Fapi%2Fpermissions%2Fupdate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpermissions%2Fupdate%2Froute.ts&appDir=%2FVolumes%2FT7%2Ferp_turinova_new%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FT7%2Ferp_turinova_new&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpermissions%2Fupdate%2Froute&page=%2Fapi%2Fpermissions%2Fupdate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpermissions%2Fupdate%2Froute.ts&appDir=%2FVolumes%2FT7%2Ferp_turinova_new%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FT7%2Ferp_turinova_new&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Volumes_T7_erp_turinova_new_src_app_api_permissions_update_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/permissions/update/route.ts */ \"(rsc)/./src/app/api/permissions/update/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/permissions/update/route\",\n        pathname: \"/api/permissions/update\",\n        filename: \"route\",\n        bundlePath: \"app/api/permissions/update/route\"\n    },\n    resolvedPagePath: \"/Volumes/T7/erp_turinova_new/src/app/api/permissions/update/route.ts\",\n    nextConfigOutput,\n    userland: _Volumes_T7_erp_turinova_new_src_app_api_permissions_update_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZwZXJtaXNzaW9ucyUyRnVwZGF0ZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcGVybWlzc2lvbnMlMkZ1cGRhdGUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwZXJtaXNzaW9ucyUyRnVwZGF0ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZWb2x1bWVzJTJGVDclMkZlcnBfdHVyaW5vdmFfbmV3JTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZWb2x1bWVzJTJGVDclMkZlcnBfdHVyaW5vdmFfbmV3JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNvQjtBQUNqRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1ZvbHVtZXMvVDcvZXJwX3R1cmlub3ZhX25ldy9zcmMvYXBwL2FwaS9wZXJtaXNzaW9ucy91cGRhdGUvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Blcm1pc3Npb25zL3VwZGF0ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Blcm1pc3Npb25zL3VwZGF0ZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcGVybWlzc2lvbnMvdXBkYXRlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1ZvbHVtZXMvVDcvZXJwX3R1cmlub3ZhX25ldy9zcmMvYXBwL2FwaS9wZXJtaXNzaW9ucy91cGRhdGUvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpermissions%2Fupdate%2Froute&page=%2Fapi%2Fpermissions%2Fupdate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpermissions%2Fupdate%2Froute.ts&appDir=%2FVolumes%2FT7%2Ferp_turinova_new%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FT7%2Ferp_turinova_new&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/permissions/update/route.ts":
/*!*************************************************!*\
  !*** ./src/app/api/permissions/update/route.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _lib_permissions_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/permissions-server */ \"(rsc)/./src/lib/permissions-server.ts\");\n\n\n\n\nasync function PUT(request) {\n    try {\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)();\n        const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_1__.createServerClient)(\"https://xgkaviefifbllbmfbyfe.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhna2F2aWVmaWZibGxibWZieWZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNDYxNTEsImV4cCI6MjA3MjcyMjE1MX0.EQFv5-iHscXMhU73oV7f90xmB8g8gr3YJ_-4ROQJ-AY\", {\n            cookies: {\n                get (name) {\n                    return cookieStore.get(name)?.value;\n                }\n            }\n        });\n        // Get current user\n        const { data: { user }, error: userError } = await supabase.auth.getUser();\n        if (userError || !user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Unauthorized'\n            }, {\n                status: 401\n            });\n        }\n        const body = await request.json();\n        const { userId, pagePath, canAccess } = body;\n        if (!userId || !pagePath || typeof canAccess !== 'boolean') {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Invalid request body'\n            }, {\n                status: 400\n            });\n        }\n        // Update permission\n        const success = await (0,_lib_permissions_server__WEBPACK_IMPORTED_MODULE_3__.updateUserPermission)(userId, pagePath, canAccess);\n        if (!success) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Failed to update permission'\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    } catch (error) {\n        console.error('Error updating user permission:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9wZXJtaXNzaW9ucy91cGRhdGUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBdUQ7QUFDTDtBQUNaO0FBQ3lCO0FBRXhELGVBQWVJLElBQUlDLE9BQW9CO0lBQzVDLElBQUk7UUFDRixNQUFNQyxjQUFjLE1BQU1KLHFEQUFPQTtRQUNqQyxNQUFNSyxXQUFXTixpRUFBa0JBLENBQ2pDTywwQ0FBb0MsRUFDcENBLGtOQUF5QyxFQUN6QztZQUNFTixTQUFTO2dCQUNQVSxLQUFJQyxJQUFZO29CQUNkLE9BQU9QLFlBQVlNLEdBQUcsQ0FBQ0MsT0FBT0M7Z0JBQ2hDO1lBQ0Y7UUFDRjtRQUdGLG1CQUFtQjtRQUNuQixNQUFNLEVBQUVDLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEVBQUVDLE9BQU9DLFNBQVMsRUFBRSxHQUFHLE1BQU1YLFNBQVNZLElBQUksQ0FBQ0MsT0FBTztRQUV4RSxJQUFJRixhQUFhLENBQUNGLE1BQU07WUFDdEIsT0FBT2hCLHFEQUFZQSxDQUFDcUIsSUFBSSxDQUFDO2dCQUFFSixPQUFPO1lBQWUsR0FBRztnQkFBRUssUUFBUTtZQUFJO1FBQ3BFO1FBRUEsTUFBTUMsT0FBTyxNQUFNbEIsUUFBUWdCLElBQUk7UUFDL0IsTUFBTSxFQUFFRyxNQUFNLEVBQUVDLFFBQVEsRUFBRUMsU0FBUyxFQUFFLEdBQUdIO1FBRXhDLElBQUksQ0FBQ0MsVUFBVSxDQUFDQyxZQUFZLE9BQU9DLGNBQWMsV0FBVztZQUMxRCxPQUFPMUIscURBQVlBLENBQUNxQixJQUFJLENBQUM7Z0JBQUVKLE9BQU87WUFBdUIsR0FBRztnQkFBRUssUUFBUTtZQUFJO1FBQzVFO1FBRUEsb0JBQW9CO1FBQ3BCLE1BQU1LLFVBQVUsTUFBTXhCLDZFQUFvQkEsQ0FBQ3FCLFFBQVFDLFVBQVVDO1FBRTdELElBQUksQ0FBQ0MsU0FBUztZQUNaLE9BQU8zQixxREFBWUEsQ0FBQ3FCLElBQUksQ0FBQztnQkFBRUosT0FBTztZQUE4QixHQUFHO2dCQUFFSyxRQUFRO1lBQUk7UUFDbkY7UUFFQSxPQUFPdEIscURBQVlBLENBQUNxQixJQUFJLENBQUM7WUFBRU0sU0FBUztRQUFLO0lBRTNDLEVBQUUsT0FBT1YsT0FBTztRQUNkVyxRQUFRWCxLQUFLLENBQUMsbUNBQW1DQTtRQUNqRCxPQUFPakIscURBQVlBLENBQUNxQixJQUFJLENBQUM7WUFBRUosT0FBTztRQUF3QixHQUFHO1lBQUVLLFFBQVE7UUFBSTtJQUM3RTtBQUNGIiwic291cmNlcyI6WyIvVm9sdW1lcy9UNy9lcnBfdHVyaW5vdmFfbmV3L3NyYy9hcHAvYXBpL3Blcm1pc3Npb25zL3VwZGF0ZS9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3NyJ1xuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycydcbmltcG9ydCB7IHVwZGF0ZVVzZXJQZXJtaXNzaW9uIH0gZnJvbSAnQC9saWIvcGVybWlzc2lvbnMtc2VydmVyJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKClcbiAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVNlcnZlckNsaWVudChcbiAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSEsXG4gICAgICB7XG4gICAgICAgIGNvb2tpZXM6IHtcbiAgICAgICAgICBnZXQobmFtZTogc3RyaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gY29va2llU3RvcmUuZ2V0KG5hbWUpPy52YWx1ZVxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgKVxuXG4gICAgLy8gR2V0IGN1cnJlbnQgdXNlclxuICAgIGNvbnN0IHsgZGF0YTogeyB1c2VyIH0sIGVycm9yOiB1c2VyRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpXG4gICAgXG4gICAgaWYgKHVzZXJFcnJvciB8fCAhdXNlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSlcbiAgICB9XG5cbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBjb25zdCB7IHVzZXJJZCwgcGFnZVBhdGgsIGNhbkFjY2VzcyB9ID0gYm9keVxuXG4gICAgaWYgKCF1c2VySWQgfHwgIXBhZ2VQYXRoIHx8IHR5cGVvZiBjYW5BY2Nlc3MgIT09ICdib29sZWFuJykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHJlcXVlc3QgYm9keScgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBwZXJtaXNzaW9uXG4gICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IHVwZGF0ZVVzZXJQZXJtaXNzaW9uKHVzZXJJZCwgcGFnZVBhdGgsIGNhbkFjY2VzcylcbiAgICBcbiAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIHVwZGF0ZSBwZXJtaXNzaW9uJyB9LCB7IHN0YXR1czogNTAwIH0pXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSlcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB1c2VyIHBlcm1pc3Npb246JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNyZWF0ZVNlcnZlckNsaWVudCIsImNvb2tpZXMiLCJ1cGRhdGVVc2VyUGVybWlzc2lvbiIsIlBVVCIsInJlcXVlc3QiLCJjb29raWVTdG9yZSIsInN1cGFiYXNlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiZ2V0IiwibmFtZSIsInZhbHVlIiwiZGF0YSIsInVzZXIiLCJlcnJvciIsInVzZXJFcnJvciIsImF1dGgiLCJnZXRVc2VyIiwianNvbiIsInN0YXR1cyIsImJvZHkiLCJ1c2VySWQiLCJwYWdlUGF0aCIsImNhbkFjY2VzcyIsInN1Y2Nlc3MiLCJjb25zb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/permissions/update/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/permissions-server.ts":
/*!***************************************!*\
  !*** ./src/lib/permissions-server.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAllPages: () => (/* binding */ getAllPages),\n/* harmony export */   getAllUserPermissions: () => (/* binding */ getAllUserPermissions),\n/* harmony export */   getAllUsersWithPermissions: () => (/* binding */ getAllUsersWithPermissions),\n/* harmony export */   getUserPermissionsFromDB: () => (/* binding */ getUserPermissionsFromDB),\n/* harmony export */   hasPagePermission: () => (/* binding */ hasPagePermission),\n/* harmony export */   updateUserPermission: () => (/* binding */ updateUserPermission)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n// Server-side Permission System Utilities\n// For use in middleware and API routes only\n\n\n/**\n * Get user permissions from database (server-side only)\n */ async function getUserPermissionsFromDB(userId) {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://xgkaviefifbllbmfbyfe.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhna2F2aWVmaWZibGxibWZieWZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNDYxNTEsImV4cCI6MjA3MjcyMjE1MX0.EQFv5-iHscXMhU73oV7f90xmB8g8gr3YJ_-4ROQJ-AY\", {\n        cookies: {\n            get (name) {\n                return cookieStore.get(name)?.value;\n            },\n            setAll (cookiesToSet) {\n                cookiesToSet.forEach(({ name, value, options })=>cookieStore.set(name, value, options));\n            }\n        }\n    });\n    const { data, error } = await supabase.rpc('get_user_permissions', {\n        user_uuid: userId\n    });\n    if (error) {\n        console.error('Error fetching user permissions:', error);\n        // Fail-closed: return empty permissions (deny access)\n        return [];\n    }\n    return data || [];\n}\n/**\n * Check if user has permission to access a specific page (server-side)\n */ async function hasPagePermission(userId, pagePath, sessionPermissions) {\n    try {\n        // Handle dynamic routes: /orders/[id] should check /orders\n        const basePath = pagePath.split('/').slice(0, 2).join('/'); // e.g., /orders/123 -> /orders\n        const checkPath = basePath.length > 1 ? basePath : pagePath; // If basePath is just '/', use original path\n        console.log(`Permission check: ${pagePath} -> ${checkPath}`);\n        // If permissions are provided (from session cache), use them\n        if (sessionPermissions) {\n            const permission = sessionPermissions.find((p)=>p.page_path === checkPath);\n            return permission?.can_access ?? false;\n        }\n        // Fallback to database check\n        const permissions = await getUserPermissionsFromDB(userId);\n        const permission = permissions.find((p)=>p.page_path === checkPath);\n        return permission?.can_access ?? false;\n    } catch (error) {\n        console.error('Error checking page permission:', error);\n        // Fail-closed: deny access on error\n        return false;\n    }\n}\n/**\n * Get all permissions for a user (server-side)\n */ async function getAllUserPermissions(userId) {\n    return await getUserPermissionsFromDB(userId);\n}\n/**\n * Update user permission in database (server-side)\n */ async function updateUserPermission(userId, pagePath, canAccess) {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://xgkaviefifbllbmfbyfe.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhna2F2aWVmaWZibGxibWZieWZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNDYxNTEsImV4cCI6MjA3MjcyMjE1MX0.EQFv5-iHscXMhU73oV7f90xmB8g8gr3YJ_-4ROQJ-AY\", {\n        cookies: {\n            get (name) {\n                return cookieStore.get(name)?.value;\n            }\n        }\n    });\n    // First get the page ID\n    const { data: page, error: pageError } = await supabase.from('pages').select('id').eq('path', pagePath).eq('is_active', true).single();\n    if (pageError || !page) {\n        console.error('Error finding page:', pageError);\n        return false;\n    }\n    // Update or insert permission\n    const { error } = await supabase.from('user_permissions').upsert({\n        user_id: userId,\n        page_id: page.id,\n        can_access: canAccess\n    }, {\n        onConflict: 'user_id,page_id'\n    });\n    if (error) {\n        console.error('Error updating user permission:', error);\n        return false;\n    }\n    return true;\n}\n/**\n * Get all users with their permissions (server-side)\n */ async function getAllUsersWithPermissions() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://xgkaviefifbllbmfbyfe.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhna2F2aWVmaWZibGxibWZieWZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNDYxNTEsImV4cCI6MjA3MjcyMjE1MX0.EQFv5-iHscXMhU73oV7f90xmB8g8gr3YJ_-4ROQJ-AY\", {\n        cookies: {\n            get (name) {\n                return cookieStore.get(name)?.value;\n            }\n        }\n    });\n    // Get all users from the public users table\n    const { data: users, error: usersError } = await supabase.from('users').select('id, email, full_name, created_at, last_sign_in_at').order('created_at', {\n        ascending: false\n    });\n    if (usersError) {\n        console.error('Error fetching users:', usersError);\n        return [];\n    }\n    return users || [];\n}\n/**\n * Get all pages for permission management (server-side)\n */ async function getAllPages() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://xgkaviefifbllbmfbyfe.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhna2F2aWVmaWZibGxibWZieWZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNDYxNTEsImV4cCI6MjA3MjcyMjE1MX0.EQFv5-iHscXMhU73oV7f90xmB8g8gr3YJ_-4ROQJ-AY\", {\n        cookies: {\n            get (name) {\n                return cookieStore.get(name)?.value;\n            }\n        }\n    });\n    const { data: pages, error } = await supabase.from('pages').select('*').eq('is_active', true).order('category', {\n        ascending: true\n    }).order('name', {\n        ascending: true\n    });\n    if (error) {\n        console.error('Error fetching pages:', error);\n        return [];\n    }\n    return pages || [];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0YsTUFBTSxFQUFFTSxNQUFNeUMsS0FBSyxFQUFFeEMsS0FBSyxFQUFFLEdBQUcsTUFBTWQsU0FDbEN1QyxJQUFJLENBQUMsU0FDTEMsTUFBTSxDQUFDLEtBQ1BDLEVBQUUsQ0FBQyxhQUFhLE1BQ2hCVSxLQUFLLENBQUMsWUFBWTtRQUFFQyxXQUFXO0lBQUssR0FDcENELEtBQUssQ0FBQyxRQUFRO1FBQUVDLFdBQVc7SUFBSztJQUVuQyxJQUFJdEMsT0FBTztRQUNURyxRQUFRSCxLQUFLLENBQUMseUJBQXlCQTtRQUN2QyxPQUFPLEVBQUU7SUFDWDtJQUVBLE9BQU93QyxTQUFTLEVBQUU7QUFDcEIiLCJzb3VyY2VzIjpbIi9Wb2x1bWVzL1Q3L2VycF90dXJpbm92YV9uZXcvc3JjL2xpYi9wZXJtaXNzaW9ucy1zZXJ2ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2VydmVyLXNpZGUgUGVybWlzc2lvbiBTeXN0ZW0gVXRpbGl0aWVzXG4vLyBGb3IgdXNlIGluIG1pZGRsZXdhcmUgYW5kIEFQSSByb3V0ZXMgb25seVxuXG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3NyJ1xuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycydcbmltcG9ydCB7IFVzZXJQZXJtaXNzaW9uIH0gZnJvbSAnLi9wZXJtaXNzaW9ucydcblxuLyoqXG4gKiBHZXQgdXNlciBwZXJtaXNzaW9ucyBmcm9tIGRhdGFiYXNlIChzZXJ2ZXItc2lkZSBvbmx5KVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlclBlcm1pc3Npb25zRnJvbURCKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyUGVybWlzc2lvbltdPiB7XG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpXG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU2VydmVyQ2xpZW50KFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxuICAgIHtcbiAgICAgIGNvb2tpZXM6IHtcbiAgICAgICAgZ2V0KG5hbWU6IHN0cmluZykge1xuICAgICAgICAgIHJldHVybiBjb29raWVTdG9yZS5nZXQobmFtZSk/LnZhbHVlXG4gICAgICAgIH0sXG4gICAgICAgIHNldEFsbChjb29raWVzVG9TZXQpIHtcbiAgICAgICAgICBjb29raWVzVG9TZXQuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSwgb3B0aW9ucyB9KSA9PiBjb29raWVTdG9yZS5zZXQobmFtZSwgdmFsdWUsIG9wdGlvbnMpKTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfVxuICApXG5cbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdnZXRfdXNlcl9wZXJtaXNzaW9ucycsIHtcbiAgICB1c2VyX3V1aWQ6IHVzZXJJZFxuICB9KVxuXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgcGVybWlzc2lvbnM6JywgZXJyb3IpXG4gICAgLy8gRmFpbC1jbG9zZWQ6IHJldHVybiBlbXB0eSBwZXJtaXNzaW9ucyAoZGVueSBhY2Nlc3MpXG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICByZXR1cm4gZGF0YSB8fCBbXVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHVzZXIgaGFzIHBlcm1pc3Npb24gdG8gYWNjZXNzIGEgc3BlY2lmaWMgcGFnZSAoc2VydmVyLXNpZGUpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNQYWdlUGVybWlzc2lvbihcbiAgdXNlcklkOiBzdHJpbmcsIFxuICBwYWdlUGF0aDogc3RyaW5nLCBcbiAgc2Vzc2lvblBlcm1pc3Npb25zPzogVXNlclBlcm1pc3Npb25bXVxuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHRyeSB7XG4gICAgLy8gSGFuZGxlIGR5bmFtaWMgcm91dGVzOiAvb3JkZXJzL1tpZF0gc2hvdWxkIGNoZWNrIC9vcmRlcnNcbiAgICBjb25zdCBiYXNlUGF0aCA9IHBhZ2VQYXRoLnNwbGl0KCcvJykuc2xpY2UoMCwgMikuam9pbignLycpOyAvLyBlLmcuLCAvb3JkZXJzLzEyMyAtPiAvb3JkZXJzXG4gICAgY29uc3QgY2hlY2tQYXRoID0gYmFzZVBhdGgubGVuZ3RoID4gMSA/IGJhc2VQYXRoIDogcGFnZVBhdGg7IC8vIElmIGJhc2VQYXRoIGlzIGp1c3QgJy8nLCB1c2Ugb3JpZ2luYWwgcGF0aFxuXG4gICAgY29uc29sZS5sb2coYFBlcm1pc3Npb24gY2hlY2s6ICR7cGFnZVBhdGh9IC0+ICR7Y2hlY2tQYXRofWApXG5cbiAgICAvLyBJZiBwZXJtaXNzaW9ucyBhcmUgcHJvdmlkZWQgKGZyb20gc2Vzc2lvbiBjYWNoZSksIHVzZSB0aGVtXG4gICAgaWYgKHNlc3Npb25QZXJtaXNzaW9ucykge1xuICAgICAgY29uc3QgcGVybWlzc2lvbiA9IHNlc3Npb25QZXJtaXNzaW9ucy5maW5kKHAgPT4gcC5wYWdlX3BhdGggPT09IGNoZWNrUGF0aClcbiAgICAgIHJldHVybiBwZXJtaXNzaW9uPy5jYW5fYWNjZXNzID8/IGZhbHNlXG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2sgdG8gZGF0YWJhc2UgY2hlY2tcbiAgICBjb25zdCBwZXJtaXNzaW9ucyA9IGF3YWl0IGdldFVzZXJQZXJtaXNzaW9uc0Zyb21EQih1c2VySWQpXG4gICAgY29uc3QgcGVybWlzc2lvbiA9IHBlcm1pc3Npb25zLmZpbmQocCA9PiBwLnBhZ2VfcGF0aCA9PT0gY2hlY2tQYXRoKVxuICAgIHJldHVybiBwZXJtaXNzaW9uPy5jYW5fYWNjZXNzID8/IGZhbHNlXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgcGFnZSBwZXJtaXNzaW9uOicsIGVycm9yKVxuICAgIC8vIEZhaWwtY2xvc2VkOiBkZW55IGFjY2VzcyBvbiBlcnJvclxuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbi8qKlxuICogR2V0IGFsbCBwZXJtaXNzaW9ucyBmb3IgYSB1c2VyIChzZXJ2ZXItc2lkZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbFVzZXJQZXJtaXNzaW9ucyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8VXNlclBlcm1pc3Npb25bXT4ge1xuICByZXR1cm4gYXdhaXQgZ2V0VXNlclBlcm1pc3Npb25zRnJvbURCKHVzZXJJZClcbn1cblxuLyoqXG4gKiBVcGRhdGUgdXNlciBwZXJtaXNzaW9uIGluIGRhdGFiYXNlIChzZXJ2ZXItc2lkZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJQZXJtaXNzaW9uKFxuICB1c2VySWQ6IHN0cmluZywgXG4gIHBhZ2VQYXRoOiBzdHJpbmcsIFxuICBjYW5BY2Nlc3M6IGJvb2xlYW5cbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKVxuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVNlcnZlckNsaWVudChcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZISxcbiAgICB7XG4gICAgICBjb29raWVzOiB7XG4gICAgICAgIGdldChuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgICByZXR1cm4gY29va2llU3RvcmUuZ2V0KG5hbWUpPy52YWx1ZVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9XG4gIClcblxuICAvLyBGaXJzdCBnZXQgdGhlIHBhZ2UgSURcbiAgY29uc3QgeyBkYXRhOiBwYWdlLCBlcnJvcjogcGFnZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdwYWdlcycpXG4gICAgLnNlbGVjdCgnaWQnKVxuICAgIC5lcSgncGF0aCcsIHBhZ2VQYXRoKVxuICAgIC5lcSgnaXNfYWN0aXZlJywgdHJ1ZSlcbiAgICAuc2luZ2xlKClcblxuICBpZiAocGFnZUVycm9yIHx8ICFwYWdlKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyBwYWdlOicsIHBhZ2VFcnJvcilcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIFVwZGF0ZSBvciBpbnNlcnQgcGVybWlzc2lvblxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCd1c2VyX3Blcm1pc3Npb25zJylcbiAgICAudXBzZXJ0KHtcbiAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgIHBhZ2VfaWQ6IHBhZ2UuaWQsXG4gICAgICBjYW5fYWNjZXNzOiBjYW5BY2Nlc3NcbiAgICB9LCB7XG4gICAgICBvbkNvbmZsaWN0OiAndXNlcl9pZCxwYWdlX2lkJ1xuICAgIH0pXG5cbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgdXNlciBwZXJtaXNzaW9uOicsIGVycm9yKVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cblxuLyoqXG4gKiBHZXQgYWxsIHVzZXJzIHdpdGggdGhlaXIgcGVybWlzc2lvbnMgKHNlcnZlci1zaWRlKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsVXNlcnNXaXRoUGVybWlzc2lvbnMoKTogUHJvbWlzZTxhbnlbXT4ge1xuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKVxuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVNlcnZlckNsaWVudChcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZISxcbiAgICB7XG4gICAgICBjb29raWVzOiB7XG4gICAgICAgIGdldChuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgICByZXR1cm4gY29va2llU3RvcmUuZ2V0KG5hbWUpPy52YWx1ZVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9XG4gIClcblxuICAvLyBHZXQgYWxsIHVzZXJzIGZyb20gdGhlIHB1YmxpYyB1c2VycyB0YWJsZVxuICBjb25zdCB7IGRhdGE6IHVzZXJzLCBlcnJvcjogdXNlcnNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgndXNlcnMnKVxuICAgIC5zZWxlY3QoJ2lkLCBlbWFpbCwgZnVsbF9uYW1lLCBjcmVhdGVkX2F0LCBsYXN0X3NpZ25faW5fYXQnKVxuICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXG4gIGlmICh1c2Vyc0Vycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlcnM6JywgdXNlcnNFcnJvcilcbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIHJldHVybiB1c2VycyB8fCBbXVxufVxuXG4vKipcbiAqIEdldCBhbGwgcGFnZXMgZm9yIHBlcm1pc3Npb24gbWFuYWdlbWVudCAoc2VydmVyLXNpZGUpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxQYWdlcygpOiBQcm9taXNlPGFueVtdPiB7XG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpXG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU2VydmVyQ2xpZW50KFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxuICAgIHtcbiAgICAgIGNvb2tpZXM6IHtcbiAgICAgICAgZ2V0KG5hbWU6IHN0cmluZykge1xuICAgICAgICAgIHJldHVybiBjb29raWVTdG9yZS5nZXQobmFtZSk/LnZhbHVlXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH1cbiAgKVxuXG4gIGNvbnN0IHsgZGF0YTogcGFnZXMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdwYWdlcycpXG4gICAgLnNlbGVjdCgnKicpXG4gICAgLmVxKCdpc19hY3RpdmUnLCB0cnVlKVxuICAgIC5vcmRlcignY2F0ZWdvcnknLCB7IGFzY2VuZGluZzogdHJ1ZSB9KVxuICAgIC5vcmRlcignbmFtZScsIHsgYXNjZW5kaW5nOiB0cnVlIH0pXG5cbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcGFnZXM6JywgZXJyb3IpXG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICByZXR1cm4gcGFnZXMgfHwgW11cbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJjb29raWVzIiwiZ2V0VXNlclBlcm1pc3Npb25zRnJvbURCIiwidXNlcklkIiwiY29va2llU3RvcmUiLCJzdXBhYmFzZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImdldCIsIm5hbWUiLCJ2YWx1ZSIsInNldEFsbCIsImNvb2tpZXNUb1NldCIsImZvckVhY2giLCJvcHRpb25zIiwic2V0IiwiZGF0YSIsImVycm9yIiwicnBjIiwidXNlcl91dWlkIiwiY29uc29sZSIsImhhc1BhZ2VQZXJtaXNzaW9uIiwicGFnZVBhdGgiLCJzZXNzaW9uUGVybWlzc2lvbnMiLCJiYXNlUGF0aCIsInNwbGl0Iiwic2xpY2UiLCJqb2luIiwiY2hlY2tQYXRoIiwibGVuZ3RoIiwibG9nIiwicGVybWlzc2lvbiIsImZpbmQiLCJwIiwicGFnZV9wYXRoIiwiY2FuX2FjY2VzcyIsInBlcm1pc3Npb25zIiwiZ2V0QWxsVXNlclBlcm1pc3Npb25zIiwidXBkYXRlVXNlclBlcm1pc3Npb24iLCJjYW5BY2Nlc3MiLCJwYWdlIiwicGFnZUVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwidXBzZXJ0IiwidXNlcl9pZCIsInBhZ2VfaWQiLCJpZCIsIm9uQ29uZmxpY3QiLCJnZXRBbGxVc2Vyc1dpdGhQZXJtaXNzaW9ucyIsInVzZXJzIiwidXNlcnNFcnJvciIsIm9yZGVyIiwiYXNjZW5kaW5nIiwiZ2V0QWxsUGFnZXMiLCJwYWdlcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/permissions-server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/cookie","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpermissions%2Fupdate%2Froute&page=%2Fapi%2Fpermissions%2Fupdate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpermissions%2Fupdate%2Froute.ts&appDir=%2FVolumes%2FT7%2Ferp_turinova_new%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FT7%2Ferp_turinova_new&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();