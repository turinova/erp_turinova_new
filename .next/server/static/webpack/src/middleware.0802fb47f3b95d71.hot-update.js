"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/lib/permissions-server.ts":
/*!***************************************!*\
  !*** ./src/lib/permissions-server.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAllPages: () => (/* binding */ getAllPages),\n/* harmony export */   getAllUserPermissions: () => (/* binding */ getAllUserPermissions),\n/* harmony export */   getAllUsersWithPermissions: () => (/* binding */ getAllUsersWithPermissions),\n/* harmony export */   getUserPermissionsFromDB: () => (/* binding */ getUserPermissionsFromDB),\n/* harmony export */   hasPagePermission: () => (/* binding */ hasPagePermission),\n/* harmony export */   updateUserPermission: () => (/* binding */ updateUserPermission)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(middleware)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(middleware)/./node_modules/next/dist/esm/api/headers.js\");\n// Server-side Permission System Utilities\n// For use in middleware and API routes only\n\n\n/**\n * Get user permissions from database (server-side only)\n */ async function getUserPermissionsFromDB(userId) {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://xgkaviefifbllbmfbyfe.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhna2F2aWVmaWZibGxibWZieWZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNDYxNTEsImV4cCI6MjA3MjcyMjE1MX0.EQFv5-iHscXMhU73oV7f90xmB8g8gr3YJ_-4ROQJ-AY\", {\n        cookies: {\n            get (name) {\n                return cookieStore.get(name)?.value;\n            },\n            setAll (cookiesToSet) {\n                cookiesToSet.forEach(({ name, value, options })=>cookieStore.set(name, value, options));\n            }\n        }\n    });\n    const { data, error } = await supabase.rpc('get_user_permissions', {\n        user_uuid: userId\n    });\n    if (error) {\n        console.error('Error fetching user permissions:', error);\n        // Fail-closed: return empty permissions (deny access)\n        return [];\n    }\n    return data || [];\n}\n/**\n * Check if user has permission to access a specific page (server-side)\n */ async function hasPagePermission(userId, pagePath, sessionPermissions) {\n    try {\n        // Handle dynamic routes: /orders/[id] should check /orders\n        const basePath = pagePath.split('/').slice(0, 3).join('/'); // e.g., /orders/123 -> /orders\n        const checkPath = basePath.length > 1 ? basePath : pagePath; // If basePath is just '/', use original path\n        // If permissions are provided (from session cache), use them\n        if (sessionPermissions) {\n            const permission = sessionPermissions.find((p)=>p.page_path === checkPath);\n            return permission?.can_access ?? false;\n        }\n        // Fallback to database check\n        const permissions = await getUserPermissionsFromDB(userId);\n        const permission = permissions.find((p)=>p.page_path === checkPath);\n        return permission?.can_access ?? false;\n    } catch (error) {\n        console.error('Error checking page permission:', error);\n        // Fail-closed: deny access on error\n        return false;\n    }\n}\n/**\n * Get all permissions for a user (server-side)\n */ async function getAllUserPermissions(userId) {\n    return await getUserPermissionsFromDB(userId);\n}\n/**\n * Update user permission in database (server-side)\n */ async function updateUserPermission(userId, pagePath, canAccess) {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://xgkaviefifbllbmfbyfe.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhna2F2aWVmaWZibGxibWZieWZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNDYxNTEsImV4cCI6MjA3MjcyMjE1MX0.EQFv5-iHscXMhU73oV7f90xmB8g8gr3YJ_-4ROQJ-AY\", {\n        cookies: {\n            get (name) {\n                return cookieStore.get(name)?.value;\n            }\n        }\n    });\n    // First get the page ID\n    const { data: page, error: pageError } = await supabase.from('pages').select('id').eq('path', pagePath).eq('is_active', true).single();\n    if (pageError || !page) {\n        console.error('Error finding page:', pageError);\n        return false;\n    }\n    // Update or insert permission\n    const { error } = await supabase.from('user_permissions').upsert({\n        user_id: userId,\n        page_id: page.id,\n        can_access: canAccess\n    }, {\n        onConflict: 'user_id,page_id'\n    });\n    if (error) {\n        console.error('Error updating user permission:', error);\n        return false;\n    }\n    return true;\n}\n/**\n * Get all users with their permissions (server-side)\n */ async function getAllUsersWithPermissions() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://xgkaviefifbllbmfbyfe.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhna2F2aWVmaWZibGxibWZieWZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNDYxNTEsImV4cCI6MjA3MjcyMjE1MX0.EQFv5-iHscXMhU73oV7f90xmB8g8gr3YJ_-4ROQJ-AY\", {\n        cookies: {\n            get (name) {\n                return cookieStore.get(name)?.value;\n            }\n        }\n    });\n    // Get all users from the public users table\n    const { data: users, error: usersError } = await supabase.from('users').select('id, email, full_name, created_at, last_sign_in_at').order('created_at', {\n        ascending: false\n    });\n    if (usersError) {\n        console.error('Error fetching users:', usersError);\n        return [];\n    }\n    return users || [];\n}\n/**\n * Get all pages for permission management (server-side)\n */ async function getAllPages() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://xgkaviefifbllbmfbyfe.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhna2F2aWVmaWZibGxibWZieWZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcxNDYxNTEsImV4cCI6MjA3MjcyMjE1MX0.EQFv5-iHscXMhU73oV7f90xmB8g8gr3YJ_-4ROQJ-AY\", {\n        cookies: {\n            get (name) {\n                return cookieStore.get(name)?.value;\n            }\n        }\n    });\n    const { data: pages, error } = await supabase.from('pages').select('*').eq('is_active', true).order('category', {\n        ascending: true\n    }).order('name', {\n        ascending: true\n    });\n    if (error) {\n        console.error('Error fetching pages:', error);\n        return [];\n    }\n    return pages || [];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL2xpYi9wZXJtaXNzaW9ucy1zZXJ2ZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSwwQ0FBMEM7QUFDMUMsNENBQTRDO0FBRU07QUFDWjtBQUd0Qzs7Q0FFQyxHQUNNLGVBQWVFLHlCQUF5QkMsTUFBYztJQUMzRCxNQUFNQyxjQUFjLE1BQU1ILHFEQUFPQTtJQUNqQyxNQUFNSSxXQUFXTCxpRUFBa0JBLENBQ2pDTSwwQ0FBb0MsRUFDcENBLGtOQUF5QyxFQUN6QztRQUNFTCxTQUFTO1lBQ1BTLEtBQUlDLElBQVk7Z0JBQ2QsT0FBT1AsWUFBWU0sR0FBRyxDQUFDQyxPQUFPQztZQUNoQztZQUNBQyxRQUFPQyxZQUFZO2dCQUNqQkEsYUFBYUMsT0FBTyxDQUFDLENBQUMsRUFBRUosSUFBSSxFQUFFQyxLQUFLLEVBQUVJLE9BQU8sRUFBRSxHQUFLWixZQUFZYSxHQUFHLENBQUNOLE1BQU1DLE9BQU9JO1lBQ2xGO1FBQ0Y7SUFDRjtJQUdGLE1BQU0sRUFBRUUsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNZCxTQUFTZSxHQUFHLENBQUMsd0JBQXdCO1FBQ2pFQyxXQUFXbEI7SUFDYjtJQUVBLElBQUlnQixPQUFPO1FBQ1RHLFFBQVFILEtBQUssQ0FBQyxvQ0FBb0NBO1FBQ2xELHNEQUFzRDtRQUN0RCxPQUFPLEVBQUU7SUFDWDtJQUVBLE9BQU9ELFFBQVEsRUFBRTtBQUNuQjtBQUVBOztDQUVDLEdBQ00sZUFBZUssa0JBQ3BCcEIsTUFBYyxFQUNkcUIsUUFBZ0IsRUFDaEJDLGtCQUFxQztJQUVyQyxJQUFJO1FBQ0YsMkRBQTJEO1FBQzNELE1BQU1DLFdBQVdGLFNBQVNHLEtBQUssQ0FBQyxLQUFLQyxLQUFLLENBQUMsR0FBRyxHQUFHQyxJQUFJLENBQUMsTUFBTSwrQkFBK0I7UUFDM0YsTUFBTUMsWUFBWUosU0FBU0ssTUFBTSxHQUFHLElBQUlMLFdBQVdGLFVBQVUsNkNBQTZDO1FBRTFHLDZEQUE2RDtRQUM3RCxJ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QUNsQ3NDLElBQUksQ0FBQyxTQUNMQyxNQUFNLENBQUMsS0FDUEMsRUFBRSxDQUFDLGFBQWEsTUFDaEJVLEtBQUssQ0FBQyxZQUFZO1FBQUVDLFdBQVc7SUFBSyxHQUNwQ0QsS0FBSyxDQUFDLFFBQVE7UUFBRUMsV0FBVztJQUFLO0lBRW5DLElBQUlyQyxPQUFPO1FBQ1RHLFFBQVFILEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDLE9BQU8sRUFBRTtJQUNYO0lBRUEsT0FBT3VDLFNBQVMsRUFBRTtBQUNwQiIsInNvdXJjZXMiOlsiL1ZvbHVtZXMvVDcvZXJwX3R1cmlub3ZhX25ldy9zcmMvbGliL3Blcm1pc3Npb25zLXNlcnZlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTZXJ2ZXItc2lkZSBQZXJtaXNzaW9uIFN5c3RlbSBVdGlsaXRpZXNcbi8vIEZvciB1c2UgaW4gbWlkZGxld2FyZSBhbmQgQVBJIHJvdXRlcyBvbmx5XG5cbmltcG9ydCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zc3InXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJ1xuaW1wb3J0IHsgVXNlclBlcm1pc3Npb24gfSBmcm9tICcuL3Blcm1pc3Npb25zJ1xuXG4vKipcbiAqIEdldCB1c2VyIHBlcm1pc3Npb25zIGZyb20gZGF0YWJhc2UgKHNlcnZlci1zaWRlIG9ubHkpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyUGVybWlzc2lvbnNGcm9tREIodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJQZXJtaXNzaW9uW10+IHtcbiAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKClcbiAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVTZXJ2ZXJDbGllbnQoXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSEsXG4gICAge1xuICAgICAgY29va2llczoge1xuICAgICAgICBnZXQobmFtZTogc3RyaW5nKSB7XG4gICAgICAgICAgcmV0dXJuIGNvb2tpZVN0b3JlLmdldChuYW1lKT8udmFsdWVcbiAgICAgICAgfSxcbiAgICAgICAgc2V0QWxsKGNvb2tpZXNUb1NldCkge1xuICAgICAgICAgIGNvb2tpZXNUb1NldC5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlLCBvcHRpb25zIH0pID0+IGNvb2tpZVN0b3JlLnNldChuYW1lLCB2YWx1ZSwgb3B0aW9ucykpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9XG4gIClcblxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5ycGMoJ2dldF91c2VyX3Blcm1pc3Npb25zJywge1xuICAgIHVzZXJfdXVpZDogdXNlcklkXG4gIH0pXG5cbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBwZXJtaXNzaW9uczonLCBlcnJvcilcbiAgICAvLyBGYWlsLWNsb3NlZDogcmV0dXJuIGVtcHR5IHBlcm1pc3Npb25zIChkZW55IGFjY2VzcylcbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIHJldHVybiBkYXRhIHx8IFtdXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdXNlciBoYXMgcGVybWlzc2lvbiB0byBhY2Nlc3MgYSBzcGVjaWZpYyBwYWdlIChzZXJ2ZXItc2lkZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc1BhZ2VQZXJtaXNzaW9uKFxuICB1c2VySWQ6IHN0cmluZywgXG4gIHBhZ2VQYXRoOiBzdHJpbmcsIFxuICBzZXNzaW9uUGVybWlzc2lvbnM/OiBVc2VyUGVybWlzc2lvbltdXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICAvLyBIYW5kbGUgZHluYW1pYyByb3V0ZXM6IC9vcmRlcnMvW2lkXSBzaG91bGQgY2hlY2sgL29yZGVyc1xuICAgIGNvbnN0IGJhc2VQYXRoID0gcGFnZVBhdGguc3BsaXQoJy8nKS5zbGljZSgwLCAzKS5qb2luKCcvJyk7IC8vIGUuZy4sIC9vcmRlcnMvMTIzIC0+IC9vcmRlcnNcbiAgICBjb25zdCBjaGVja1BhdGggPSBiYXNlUGF0aC5sZW5ndGggPiAxID8gYmFzZVBhdGggOiBwYWdlUGF0aDsgLy8gSWYgYmFzZVBhdGggaXMganVzdCAnLycsIHVzZSBvcmlnaW5hbCBwYXRoXG5cbiAgICAvLyBJZiBwZXJtaXNzaW9ucyBhcmUgcHJvdmlkZWQgKGZyb20gc2Vzc2lvbiBjYWNoZSksIHVzZSB0aGVtXG4gICAgaWYgKHNlc3Npb25QZXJtaXNzaW9ucykge1xuICAgICAgY29uc3QgcGVybWlzc2lvbiA9IHNlc3Npb25QZXJtaXNzaW9ucy5maW5kKHAgPT4gcC5wYWdlX3BhdGggPT09IGNoZWNrUGF0aClcbiAgICAgIHJldHVybiBwZXJtaXNzaW9uPy5jYW5fYWNjZXNzID8/IGZhbHNlXG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2sgdG8gZGF0YWJhc2UgY2hlY2tcbiAgICBjb25zdCBwZXJtaXNzaW9ucyA9IGF3YWl0IGdldFVzZXJQZXJtaXNzaW9uc0Zyb21EQih1c2VySWQpXG4gICAgY29uc3QgcGVybWlzc2lvbiA9IHBlcm1pc3Npb25zLmZpbmQocCA9PiBwLnBhZ2VfcGF0aCA9PT0gY2hlY2tQYXRoKVxuICAgIHJldHVybiBwZXJtaXNzaW9uPy5jYW5fYWNjZXNzID8/IGZhbHNlXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgcGFnZSBwZXJtaXNzaW9uOicsIGVycm9yKVxuICAgIC8vIEZhaWwtY2xvc2VkOiBkZW55IGFjY2VzcyBvbiBlcnJvclxuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbi8qKlxuICogR2V0IGFsbCBwZXJtaXNzaW9ucyBmb3IgYSB1c2VyIChzZXJ2ZXItc2lkZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbFVzZXJQZXJtaXNzaW9ucyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8VXNlclBlcm1pc3Npb25bXT4ge1xuICByZXR1cm4gYXdhaXQgZ2V0VXNlclBlcm1pc3Npb25zRnJvbURCKHVzZXJJZClcbn1cblxuLyoqXG4gKiBVcGRhdGUgdXNlciBwZXJtaXNzaW9uIGluIGRhdGFiYXNlIChzZXJ2ZXItc2lkZSlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJQZXJtaXNzaW9uKFxuICB1c2VySWQ6IHN0cmluZywgXG4gIHBhZ2VQYXRoOiBzdHJpbmcsIFxuICBjYW5BY2Nlc3M6IGJvb2xlYW5cbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKVxuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVNlcnZlckNsaWVudChcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZISxcbiAgICB7XG4gICAgICBjb29raWVzOiB7XG4gICAgICAgIGdldChuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgICByZXR1cm4gY29va2llU3RvcmUuZ2V0KG5hbWUpPy52YWx1ZVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9XG4gIClcblxuICAvLyBGaXJzdCBnZXQgdGhlIHBhZ2UgSURcbiAgY29uc3QgeyBkYXRhOiBwYWdlLCBlcnJvcjogcGFnZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdwYWdlcycpXG4gICAgLnNlbGVjdCgnaWQnKVxuICAgIC5lcSgncGF0aCcsIHBhZ2VQYXRoKVxuICAgIC5lcSgnaXNfYWN0aXZlJywgdHJ1ZSlcbiAgICAuc2luZ2xlKClcblxuICBpZiAocGFnZUVycm9yIHx8ICFwYWdlKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyBwYWdlOicsIHBhZ2VFcnJvcilcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIFVwZGF0ZSBvciBpbnNlcnQgcGVybWlzc2lvblxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCd1c2VyX3Blcm1pc3Npb25zJylcbiAgICAudXBzZXJ0KHtcbiAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgIHBhZ2VfaWQ6IHBhZ2UuaWQsXG4gICAgICBjYW5fYWNjZXNzOiBjYW5BY2Nlc3NcbiAgICB9LCB7XG4gICAgICBvbkNvbmZsaWN0OiAndXNlcl9pZCxwYWdlX2lkJ1xuICAgIH0pXG5cbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgdXNlciBwZXJtaXNzaW9uOicsIGVycm9yKVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cblxuLyoqXG4gKiBHZXQgYWxsIHVzZXJzIHdpdGggdGhlaXIgcGVybWlzc2lvbnMgKHNlcnZlci1zaWRlKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsVXNlcnNXaXRoUGVybWlzc2lvbnMoKTogUHJvbWlzZTxhbnlbXT4ge1xuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKVxuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVNlcnZlckNsaWVudChcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZISxcbiAgICB7XG4gICAgICBjb29raWVzOiB7XG4gICAgICAgIGdldChuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgICByZXR1cm4gY29va2llU3RvcmUuZ2V0KG5hbWUpPy52YWx1ZVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9XG4gIClcblxuICAvLyBHZXQgYWxsIHVzZXJzIGZyb20gdGhlIHB1YmxpYyB1c2VycyB0YWJsZVxuICBjb25zdCB7IGRhdGE6IHVzZXJzLCBlcnJvcjogdXNlcnNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgndXNlcnMnKVxuICAgIC5zZWxlY3QoJ2lkLCBlbWFpbCwgZnVsbF9uYW1lLCBjcmVhdGVkX2F0LCBsYXN0X3NpZ25faW5fYXQnKVxuICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXG4gIGlmICh1c2Vyc0Vycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlcnM6JywgdXNlcnNFcnJvcilcbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIHJldHVybiB1c2VycyB8fCBbXVxufVxuXG4vKipcbiAqIEdldCBhbGwgcGFnZXMgZm9yIHBlcm1pc3Npb24gbWFuYWdlbWVudCAoc2VydmVyLXNpZGUpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxQYWdlcygpOiBQcm9taXNlPGFueVtdPiB7XG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpXG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU2VydmVyQ2xpZW50KFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxuICAgIHtcbiAgICAgIGNvb2tpZXM6IHtcbiAgICAgICAgZ2V0KG5hbWU6IHN0cmluZykge1xuICAgICAgICAgIHJldHVybiBjb29raWVTdG9yZS5nZXQobmFtZSk/LnZhbHVlXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH1cbiAgKVxuXG4gIGNvbnN0IHsgZGF0YTogcGFnZXMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdwYWdlcycpXG4gICAgLnNlbGVjdCgnKicpXG4gICAgLmVxKCdpc19hY3RpdmUnLCB0cnVlKVxuICAgIC5vcmRlcignY2F0ZWdvcnknLCB7IGFzY2VuZGluZzogdHJ1ZSB9KVxuICAgIC5vcmRlcignbmFtZScsIHsgYXNjZW5kaW5nOiB0cnVlIH0pXG5cbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcGFnZXM6JywgZXJyb3IpXG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICByZXR1cm4gcGFnZXMgfHwgW11cbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJjb29raWVzIiwiZ2V0VXNlclBlcm1pc3Npb25zRnJvbURCIiwidXNlcklkIiwiY29va2llU3RvcmUiLCJzdXBhYmFzZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImdldCIsIm5hbWUiLCJ2YWx1ZSIsInNldEFsbCIsImNvb2tpZXNUb1NldCIsImZvckVhY2giLCJvcHRpb25zIiwic2V0IiwiZGF0YSIsImVycm9yIiwicnBjIiwidXNlcl91dWlkIiwiY29uc29sZSIsImhhc1BhZ2VQZXJtaXNzaW9uIiwicGFnZVBhdGgiLCJzZXNzaW9uUGVybWlzc2lvbnMiLCJiYXNlUGF0aCIsInNwbGl0Iiwic2xpY2UiLCJqb2luIiwiY2hlY2tQYXRoIiwibGVuZ3RoIiwicGVybWlzc2lvbiIsImZpbmQiLCJwIiwicGFnZV9wYXRoIiwiY2FuX2FjY2VzcyIsInBlcm1pc3Npb25zIiwiZ2V0QWxsVXNlclBlcm1pc3Npb25zIiwidXBkYXRlVXNlclBlcm1pc3Npb24iLCJjYW5BY2Nlc3MiLCJwYWdlIiwicGFnZUVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwidXBzZXJ0IiwidXNlcl9pZCIsInBhZ2VfaWQiLCJpZCIsIm9uQ29uZmxpY3QiLCJnZXRBbGxVc2Vyc1dpdGhQZXJtaXNzaW9ucyIsInVzZXJzIiwidXNlcnNFcnJvciIsIm9yZGVyIiwiYXNjZW5kaW5nIiwiZ2V0QWxsUGFnZXMiLCJwYWdlcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./src/lib/permissions-server.ts\n");

/***/ })

});